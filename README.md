# CosmeLimiter / コスメリミッター

化粧品の使用期限を自動で計算・追跡し、適切な使用時期を通知するウェブアプリケーションです。製品の開封日から自動的に使用期限を計算し、期限が近づくとユーザーに通知します。

![ヘッダー画像](assets/images/header.jpg)

## デモアカウント情報

アプリの機能をすぐに試したい方は、以下のデモアカウントをご利用ください。

```
メールアドレス: demo@example.com
パスワード：demo_user123
```

## 要件定義

### 解決する課題

- 化粧品の使用状況や期限切れを自動で可視化し、記録・管理の手間を削減したい
- 期限を過ぎた化粧品の使用による肌トラブルを防ぎたい
- ストックや使用ペースを一元的に把握し、無駄な買い足しや使い忘れをなくしたい
- 期限や使用頻度に基づいたデータ分析を行い、より計画的で衛生的なコスメ管理を実現したい
- 自身のコスメ使用傾向を見直し、消費行動を効率化したい

### ターゲットユーザー

- 20-30代女性がメイン
- 化粧品の衛生管理に関心がある方
- メイクアップ愛好家やスキンケアに力を入れている方
- 肌トラブルを避けたい敏感肌の方

### 主要なユーザーストーリー

- 化粧品の開封日を記録し、自動的に使用期限を計算してもらいたい
- 使用期限が近づいた製品についての通知を受け取りたい
- 製品を種類やブランド別に管理・検索したい
- AI機能を使って商品カテゴリを自動提案してもらいたい
- 使用中と使用済みの製品を区別して管理したい

## 機能一覧

### 主要機能

- 📝 **アイテム登録機能**：製品情報と開封日の登録
- ⏰ **自動期限計算**：製品カテゴリに基づく適切な使用期限の計算
- 🔍 **階層的カテゴリ分類**：メイクアップ、スキンケアなど主要カテゴリとサブカテゴリ
- 🔔 **通知システム**：期限30日前、14日前、7日前、期限切れ通知
- 🤖 **AI支援カテゴリ提案**：商品名から最適なカテゴリをAIが提案
- 📊 **使用期限チャート表示**：期限切れリスクの可視化
- 👤 **ユーザー認証**：メールアドレスベースのサインアップ/ログイン
- 🖼️ **画像アップロード**：製品画像の登録機能
- 🔄 **ステータス管理**：使用中/使用済み製品の管理

### 補助機能

- 🔍 **フィルタリング検索**：カテゴリやステータスごとの絞り込み
- 📝 **メモ機能**：製品に関するメモの記録
- 📱 **レスポンシブデザイン**：モバイルフレンドリーなUI
- 📈 **使用状況ダッシュボード**：登録製品の統計情報表示

## 使用技術

### バックエンド

- **フレームワーク**: Django 5.2.4
- **言語**: Python 3.13+
- **データベース**: SQLite (開発環境)
- **認証システム**: カスタムEmailBackend (Djangoの認証システム拡張)
- **APIクライアント**: OpenAI API (gpt-5-nano)

### フロントエンド

- **フレームワーク**: Bootstrap 5.2.3
- **JavaScript**: Chart.js (データ可視化)
- **UI/UXライブラリ**: Font Awesome 6.0.0
- **フォーム処理**: Django Forms + カスタムJS

### 外部API

- **OpenAI API**: 商品名からカテゴリを自動推定する機能で使用
  - 実装: `beauty/llm.py` に実装されたクライアント
  - 目的: ユーザーの入力労力削減とカテゴリ分類の精度向上
  - モデル: gpt-5-nano (JSON応答形式)

### 主要パッケージ

- **画像処理**: Pillow 11.3.0+
- **環境変数管理**: python-dotenv
- **タイムゾーン**: zoneinfo

## 環境構築方法

### 前提条件

- Python 3.13+
- pip (Pythonパッケージマネージャー)
- 仮想環境ツール (venv推奨)

### 手順

1. リポジトリのクローン
   ```bash
   git clone <リポジトリURL>
   cd cosme_expiry_app
   ```

2. 仮想環境の作成と有効化
   ```bash
   python -m venv venv
   
   # Windowsの場合
   venv\Scripts\activate
   
   # macOS/Linuxの場合
   source venv/bin/activate
   ```

3. 依存パッケージのインストール
   ```bash
   pip install -r requirements.txt
   
   # 必須パッケージの追加インストール
   pip install openai python-dotenv
   ```

4. 環境変数の設定
   ```bash
   # .envファイルを作成
   touch .env
   
   # 以下の内容を.envファイルに追加
   OPENAI_API_KEY=your_openai_api_key_here
   ```

5. データベースのセットアップ
   ```bash
   python manage.py migrate
   ```

6. 初期データの作成
   ```bash
   python init_taxons.py
   ```

7. 開発サーバーの起動
   ```bash
   python manage.py runserver
   ```

8. ブラウザでアクセス
   ```
   http://127.0.0.1:8000/
   ```

### 通知機能の設定

定期通知を有効にするには、以下のコマンドを定期的に実行するようにスケジュールします：

```bash
python manage.py generate_notifications
```

* Windows: Windowsタスクスケジューラを使用
* Linux/macOS: cronを使用

---

## 開発者向け補足情報

### テストアカウント作成

```bash
python manage.py shell
```

```python
from django.contrib.auth.models import User
User.objects.create_user('demo@example.com', 'demo@example.com', 'demo_user123')
```

### サンプルデータ作成

```bash
python create_sample_items.py
```

### 既存データの確認

```bash
python list_taxons.py  # カテゴリ一覧の表示
python list_users.py   # ユーザー一覧の表示
```

---

## ライセンス

このプロジェクトは個人的なポートフォリオ用であり、商用利用は意図されていません。

---

*このアプリケーションは学習およびポートフォリオ目的で作成されました。*